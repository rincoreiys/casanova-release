(function(){"use strict";var t={742:function(t,e,a){var n,i,s=a(471),o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("v-app",[e("v-main",[t.ready?e("div",{staticStyle:{display:"flex",width:"100%"}},[e("vue-tabs-chrome",{ref:"tab",attrs:{theme:"custom",tabs:t.tabs,gap:0,autoHiddenCloseIconWidth:170,onClose:t.CloseTab,tabCloseWidth:50},scopedSlots:t._u([{key:"progress",fn:function({tab:a}){return[e("v-progress-linear",{attrs:{stream:"","buffer-value":"0",height:"2",value:a.character.done.length/a.character.routines.length*100,color:t.active_tab==a.character.nickname?"neon":"grey"}})]}}],null,!1,949583967),model:{value:t.active_tab,callback:function(e){t.active_tab=e},expression:"active_tab"}},[e("button",{staticClass:"add-button fluent-icon",attrs:{slot:"after"},on:{click:t.AddTab},slot:"after"},[t._v(" ")])])],1):t._e()])],1)],1)},r=[],l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"vue-tabs-chrome",class:t.theme?"theme-"+t.theme:""},[e("div",{ref:"content",staticClass:"tabs-content"},[t._l(t.tabs.length,(function(a){return e("div",{key:a,staticClass:"tabs-divider",style:{left:(t.tabWidth-2*t.gap)*a+t.gap+"px"}})})),t._l(t.tabs,(function(a,n){return e("div",{key:t.getKey(a),ref:"item",refInFor:!0,staticClass:"tabs-item",class:[{active:t.getKey(a)===t.value},`tab-${t.getKey(a)}`,a.class].filter((t=>t)),style:{width:t.tabWidth+"px"},on:{contextmenu:e=>t.handleMenu(e,a,n)}},[e("div",{staticClass:"tabs-background"},[e("div",{staticClass:"tabs-background-content"},[t._t("progress",null,{tab:a})],2),e("svg",{staticClass:"tabs-background-before",attrs:{width:"7",height:"7"}},[e("path",{attrs:{d:"M 0 7 A 7 7 0 0 0 7 0 L 7 7 Z"}})]),e("svg",{staticClass:"tabs-background-after",attrs:{width:"7",height:"7"}},[e("path",{attrs:{d:"M 0 0 A 7 7 0 0 0 7 7 L 0 7 Z"}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.canShowTabClose(a),expression:"canShowTabClose(tab)"}],staticClass:"tabs-close",style:{width:t.tabCloseWidth+"px"},on:{click:function(e){return e.stopPropagation(),t.handleDelete(a,n)}}},[t._t("close-icon",(function(){return[e("svg",{staticClass:"tabs-close-icon",attrs:{width:"16",height:"16",stroke:"#595959"}},[e("path",{attrs:{d:"M 4 4 L 12 12 M 12 4 L 4 12"}})])]}),{tab:t.getTab(a),index:n})],2),e("div",{staticClass:"tabs-main",attrs:{title:t._f("tabLabelText")(a,t.tabLabel,t.renderLabel)}},[a.favicon?e("span",{staticClass:"tabs-favicon"},["function"===typeof a.favicon?e("render-temp",{attrs:{render:a.favicon,params:{tab:a,index:n}}}):a.favicon?e("img",{attrs:{height:"32",width:"32",src:a.favicon}}):t._e()],1):t._e(),e("span",{staticClass:"tabs-label",class:{"no-close":!t.canShowTabClose(a)},style:{marginRight:t.canShowTabClose(a)?t.tabCloseWidth+"px":0}},[t._v(t._s(t._f("tabLabelText")(a,t.tabLabel,t.renderLabel)))])])])})),e("span",{ref:"after",staticClass:"tabs-after",style:{left:(t.tabWidth-2*t.gap)*t.tabs.length+2*t.gap+"px"}},[t._t("after")],2)],2),e("div",{staticClass:"tabs-footer"})])},c=[],d=a(587),h=a.n(d),u={name:"render-temp",props:{render:{type:Function,default:()=>{}},params:{type:Object,default:()=>({})}},render(t){return this.render&&this.render(t,{...this.params})}},b=u,f=a(656),p=(0,f.A)(b,n,i,!1,null,null,null),m=p.exports;const v=(t,e,a,n,i)=>{let s=(a-i)/2,o=e._instance.position.x;for(let r=0;r<t.length;r++){let a=t[r]._x-1;if(y(e,n)!==y(t[r],n)){if(a<=o&&o<a+s/2)return{direction:"left",instance:t[r]._instance,targetTab:t[r]};if(a+s/2<=o&&o<a+s)return{direction:"right",instance:t[r]._instance,targetTab:t[r]}}}return{direction:null,instance:null,targetTab:e}},g=(t,e)=>{let a=e.split("."),n=t;return a.forEach((t=>{n=n[t]})),n},y=(t,e)=>g(t,e);var _={name:"vue-tabs-chrome",components:{RenderTemp:m},props:{value:{type:[String,Number],default:""},tabs:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})},minWidth:{type:Number,default:40},autoHiddenCloseIconWidth:{type:Number,default:120},maxWidth:{type:Number,default:245},gap:{type:Number,default:7},insertToAfter:{type:Boolean,default:!1},theme:{type:String,default:""},isMousedownActive:{type:Boolean,default:!0},renderLabel:{type:Function},onClose:{type:Function},tabCloseWidth:{type:Number,default:16}},data(){return{tabWidth:null}},filters:{tabLabelText(t,e="",a){return a?a(t):g(t,e)}},computed:{tabKey(){return this.props.key||"key"},tabLabel(){return this.props.label||"label"}},mounted(){this.calcTabWidth(),window.addEventListener("resize",this.handleResize),this.setup()},destroyed(){window.removeEventListener("resize",this.handleResize)},methods:{canShowTabClose(t,e){return!1!==t.closable&&(t[this.tabKey]===this.value||!(this.autoHiddenCloseIconWidth>this.tabWidth))},calcTabWidth(){let{tabs:t,maxWidth:e,minWidth:a,gap:n}=this,i=this.$refs.content,s=this.$refs.after,o=s.getBoundingClientRect().width;if(!i)return Math.max(e,a);let r=i.clientWidth-3*n-o,l=r/t.length;l+=2*n,l>e&&(l=e),l<a&&(l=a),this.tabWidth=l},setup(){let{tabs:t}=this;t.forEach(((t,e)=>{this.addInstance(t,e)}))},addInstance(t,e){let{tabWidth:a,tabKey:n,gap:i}=this;if(t._instance)return void t._instance.setPosition(t._x,0);let s=this.$refs.content,o=this.$refs.item,r=o.find((e=>e.classList.contains(`tab-${y(t,n)}`)));t._instance=new(h())(r,{axis:"x",containment:s,handle:".tabs-main"}),!1===t.dragable&&(t._instance.disable(),r.addEventListener("mousedown",(a=>this.handlePointerDown(a,t,e))),r.addEventListener("click",(a=>this.handleClick(a,t,e))));let l=(a-2*i)*e;t._x=l,t._instance.setPosition(l,0),t._instance.on("pointerDown",(a=>this.handlePointerDown(a,t,e))),t._instance.on("dragMove",(a=>this.handleDragMove(a,t,e))),t._instance.on("dragEnd",(a=>this.handleDragEnd(a,t,e))),t._instance.on("staticClick",(a=>this.handleClick(a,t,e)))},addTab(...t){let{insertToAfter:e,value:a,tabKey:n}=this;if(e){let e=this.tabs.findIndex((t=>y(t,n)===a));this.tabs.splice(e+1,0,...t)}else this.tabs.push(...t);this.$nextTick((()=>{this.setup(),this.doLayout()}))},removeTab(t){let{tabKey:e,tabs:a}=this,n=-1,i=null;"number"===typeof tab?(n=t,i=this.tabs[n]):a.forEach(((a,s)=>{y(a,e)===t&&(n=s,i=a)})),n>=0&&i&&this.handleDelete(i,n)},doLayout(){this.calcTabWidth();let{tabWidth:t,tabs:e,gap:a}=this;e.forEach(((e,n)=>{let i=e._instance,s=(t-2*a)*n;e._x=s,i.setPosition(s,0)}))},handleDelete(t,e){if("function"===typeof this.onClose&&!this.onClose(t,t[this.tabKey],e))return!1;let a,n,{tabKey:i,tabs:s,value:o}=this,r=s.findIndex((t=>y(t,i)===o));e===r&&(a=s[e+1],n=s[e-1]),a?this.$emit("input",y(a,i)):n?this.$emit("input",y(n,i)):s.length<=1&&this.$emit("input",null),s.splice(e,1),this.$emit("remove",t,e),this.$nextTick((()=>{this.doLayout()}))},handleResize(t){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{this.doLayout()}),100)},handlePointerDown(t,e,a){let{tabKey:n,isMousedownActive:i}=this;i&&this.$emit("input",y(e,n)),this.$emit("dragstart",t,e,a)},handleDragMove(t,e,a){let{tabWidth:n,tabs:i,tabKey:s,gap:o}=this,{instance:r,targetTab:l}=v(i,e,n,s,o);r&&this.swapTab(e,l),this.$emit("dragging",t,l,a)},handleDragEnd(t,e){let a=e._instance;a.position.x<0||(setTimeout((()=>{a.element.classList.add("move"),a.setPosition(e._x,0)}),50),setTimeout((()=>{this.$emit("dragend",t,e),a.element.classList.remove("move")}),200))},handleClick(t,e,a){this.$emit("click",t,e,a)},handleMenu(t,e,a){this.$emit("contextmenu",t,e,a)},swapTab(t,e){let a,n,{tabKey:i,tabs:s}=this;if(!1===e.swappable)return;for(let l=0;l<s.length;l++)y(t,i)===y(s[l],i)&&(a=l),y(e,i)===y(s[l],i)&&(n=l);a!==n&&([s[a],s[n]]=[s[n],s[a]]);let o=t._x;t._x=e._x,e._x=o;let r=e._instance;setTimeout((()=>{r.element.classList.add("move"),r.setPosition(o,r.position.y)}),50),setTimeout((()=>{r.element.classList.remove("move"),this.$emit("swap",t,e)}),200),this.tabs.splice(0,0)},getTab(t){let e={...t};return delete e._instance,delete e._x,e},getTabs(){return this.tabs.map((t=>{let e={...t};return delete e._instance,delete e._x,e}))},getKey(t){return y(t,this.tabKey)}}},w=_,T=(0,f.A)(w,l,c,!1,null,null,null),k=T.exports;const C=function(t){C.installed||(C.installed=!0,t.component(k.name,k))};"undefined"!==typeof window&&window.Vue&&C(window.Vue),k.install=C;var x=k;const L=async t=>{try{await window.chrome.webview.postMessage(t)}catch(e){console.log(e)}};var W={components:{VueTabsChrome:x},data:()=>({active_tab:"",tabs:[],ready:!1,workspace_mode:new URL(window.location).searchParams.get("workspace_mode")}),watch:{active_tab(t,e){let a=this.tabs.find((e=>e.character.nickname==t));void 0!==a&&e!==t&&L({Event:"focus_tab",Data:a.character.nickname})}},methods:{CloseTab(t){return L({Event:"close_tab",Data:t.character.nickname}),console.log("CloseCharacter",t.character,t),!0},CloseTabByRemote(t){this.$refs.tab.removeTab(t)},AddTab(){"freemode"==this.workspace_mode?L({Event:"select_character"}):"automate"==this.workspace_mode&&L({Event:"fetch_character"})},SyncTabs(t){try{console.log(t);var e=JSON.parse(t).map((t=>({label:t.nickname,key:t.nickname,character:t,dragable:!1,favicon:()=>{}})));console.log(e),this.tabs=e,console.log(this.tabs)}catch(a){console.log(a)}finally{setTimeout((()=>{this.ready=!0}),300)}},SetActiveTab(t){this.active_tab=t,console.log(this.active_tab)},LoadTab(t){let e=this.tabs.find((e=>e.character.nickname==t.nickname));console.log("mounting",e,void 0==e,t),void 0==e&&(this.$refs.tab&&this.$refs.tab.addTab({label:t.nickname,key:t.nickname,character:t,dragable:!1,favicon:()=>{}}),1!=this.tabs.length&&"freemode"!=this.workspace_mode||setTimeout((()=>{this.active_tab=t.nickname}),100))},ChangeProgress({nickname:t,done:e}){let a=this.tabs.find((e=>e.character.nickname==t));a&&(a.character.done=e)}},mounted(){window.$com=this}},$=W,S=(0,f.A)($,o,r,!1,null,null,null),E=S.exports,M=a(600),O=a.n(M);a(301);s["default"].config.productionTip=!1,s["default"].use(O()),new s["default"]({vuetify:new(O())({theme:{dark:!0},icons:{iconfont:"mdi"}}),render:function(t){return t(E)}}).$mount("#app")}},e={};function a(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,a),s.exports}a.m=t,function(){var t=[];a.O=function(e,n,i,s){if(!n){var o=1/0;for(d=0;d<t.length;d++){n=t[d][0],i=t[d][1],s=t[d][2];for(var r=!0,l=0;l<n.length;l++)(!1&s||o>=s)&&Object.keys(a.O).every((function(t){return a.O[t](n[l])}))?n.splice(l--,1):(r=!1,s<o&&(o=s));if(r){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}s=s||0;for(var d=t.length;d>0&&t[d-1][2]>s;d--)t[d]=t[d-1];t[d]=[n,i,s]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};a.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,s,o=n[0],r=n[1],l=n[2],c=0;if(o.some((function(e){return 0!==t[e]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(l)var d=l(a)}for(e&&e(n);c<o.length;c++)s=o[c],a.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return a.O(d)},n=self["webpackChunktab"]=self["webpackChunktab"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(742)}));n=a.O(n)})();
//# sourceMappingURL=app.0c74a7eb.js.map